<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
    <style>
        
    </style>
</head>
<body>            
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>

    <script>
        let obj = document.getElementById("fade-obj");
        let btn = document.getElementById("fade-btn");

        let opacity = 1;
        obj.out = true;
        obj.in = false;

        //setTimeout

        // let fadeOut =  function() {
        //     console.log("out");
        //     if (opacity == 0) {
        //         clearInterval(out);
        //         // clearTimeout(fadeOut);
        //         //两种不可点击方法
        //         btn.style.pointerEvents = "auto";
        //         // btn.removeAttribute("disabled");

        //         btn.innerHTML = "淡入"
        //     } else {
        //         if(opacity == 1) {
        //             btn.style.pointerEvents = "none";
        //             // btn.setAttribute("disabled", "1");
        //             obj.out = false;
        //             obj.in = true;
        //         }
        //         opacity = Number(opacity);
        //         opacity -= .1;
        //         opacity = opacity.toFixed(1);
        //         obj.style.opacity = opacity;
        //         // setTimeout(fadeOut, 500);
        //     }
        // }
        // let fadeIn =  function() {
        //     console.log("in");
        //     if (opacity == 1) {
        //         clearTimeout(fadeIn);
        //         btn.style.pointerEvents = "auto";
        //         // btn.removeAttribute("disabled");
        //         btn.innerHTML = "淡出"
        //     } else {
        //         if(opacity == 0) {
        //             btn.style.pointerEvents = "none";
        //             // btn.setAttribute("disabled", "1");
        //             obj.out = true;
        //             obj.in = false;
        //         }
        //         opacity = Number(opacity);
        //         opacity += .1;
        //         opacity = opacity.toFixed(1);
        //         obj.style.opacity = opacity;
        //         setTimeout(fadeIn, 500);
        //     }
        // }

        // btn.onclick = () => {
        //     if(obj.out) {
        //         setTimeout(fadeOut, 500);
        //     }
        //     if(obj.in) {
        //         setTimeout(fadeIn, 500);
        //     }
        // };


        //setInterval
        
        btn.onclick = () => {
            if(obj.out) {
                let fadeOut = setInterval(() => {
                    console.log("out");
                    if (opacity == 0) {
                        clearInterval(fadeOut);
                        // clearTimeout(fadeOut);
                        //两种不可点击方法
                        btn.style.pointerEvents = "auto";
                        // btn.removeAttribute("disabled");

                        btn.innerHTML = "淡入"
                    } else {
                        if(opacity == 1) {
                            btn.style.pointerEvents = "none";
                            // btn.setAttribute("disabled", "1");
                            obj.out = false;
                            obj.in = true;
                        }
                        opacity = Number(opacity);
                        opacity -= .1;
                        opacity = opacity.toFixed(1);
                        obj.style.opacity = opacity;
                        // setTimeout(fadeOut, 500);
                    }
                }, 500);
            }
            if(obj.in) {
                let fadeIn = setInterval(() => {
                    console.log("in");
                    if (opacity == 1) {
                        clearTimeout(fadeIn);
                        btn.style.pointerEvents = "auto";
                        // btn.removeAttribute("disabled");
                        btn.innerHTML = "淡出"
                    } else {
                        if(opacity == 0) {
                            btn.style.pointerEvents = "none";
                            // btn.setAttribute("disabled", "1");
                            obj.out = true;
                            obj.in = false;
                        }
                        opacity = Number(opacity);
                        opacity += .1;
                        opacity = opacity.toFixed(1);
                        obj.style.opacity = opacity;
                        setTimeout(fadeIn, 500);
                    }
                }, 500);
            }
        };
    </script>
</body>
</html>